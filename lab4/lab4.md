Для запуска лабораторной работы вам понадобятся два файла (сервер и клиент) и установленный Python (версии 3.x).

Вот пошаговая инструкция:

### 1. Подготовка файлов
Создайте папку для лабораторной работы и сохраните в неё два файла с кодом из предыдущего ответа:
1.  **`server.py`** — код сервера.
2.  **`client.py`** — код клиента.

### 2. Запуск Сервера
Сервер должен быть запущен первым. Он будет висеть в ожидании подключений.

1.  Откройте терминал (командную строку/PowerShell).
2.  Перейдите в папку с файлами:
    ```bash
    cd путь/к/вашей/папке
    ```
3.  Запустите сервер:
    ```bash
    python server.py
    ```
    *(Если у вас Linux/macOS, возможно нужно писать `python3 server.py`)*

**Ожидаемый результат:**
Вы увидите сообщение:
```text
Pool initialized with 2 processes.
Server listening on 0.0.0.0:9999
[Manager] Active: 0, Pool Size: 2
```
*Примечание: Если Windows попросит доступ к сети (Брандмауэр), нажмите «Разрешить».*

---

### 3. Запуск Клиента
Клиента нужно запускать в **новом** окне терминала, не закрывая окно с сервером.

1.  Откройте второе окно терминала.
2.  Перейдите в ту же папку.
3.  Для теста загрузки файлов создайте какой-нибудь тестовый файл (или используйте сам скрипт):
    *   В Windows: `echo Hello World > test.txt`
    *   В Linux/Mac: `echo "Hello World" > test.txt`
4.  Запустите клиента:
    ```bash
    python client.py
    ```

**Ожидаемый результат:**
```text
Connected to 127.0.0.1:9999
Commands: ECHO <txt>, TIME, UPLOAD <file>, DOWNLOAD <file>, CLOSE
Command>
```

---

### 4. Проверка команд (Тестирование)

В окне **клиента** вводите команды:

**А. Проверка связи (ECHO)**
```text
Command> ECHO Привет, сервер!
Server: Привет, сервер!
```

**Б. Проверка времени (TIME)**
```text
Command> TIME
Server: 2023-10-27 15:30:45
```

**В. Загрузка файла на сервер (UPLOAD)**
Убедитесь, что файл `test.txt` лежит рядом с `client.py`.
```text
Command> UPLOAD test.txt
Sending data...
Server: Uploaded. Bitrate: 0.50 Mbps
```
*В папке с сервером появится файл `test.txt_uploaded`.*

**Г. Скачивание файла с сервера (DOWNLOAD)**
Попробуем скачать тот файл, который только что загрузили (сервер сохранил его с суффиксом `_uploaded`).
```text
Command> DOWNLOAD test.txt_uploaded
Server: OK 12
(содержимое файла)
```

**Д. Завершение работы**
```text
Command> CLOSE
```

### 5. Как проверить "Параллельность" и работу пула (Важно для защиты)

Чтобы увидеть, как сервер создает новые процессы под нагрузкой (требование варианта 12), сделайте следующее:

1.  Запустите **Сервер**.
2.  Запустите **3 разных окна** с клиентами.
3.  В окне сервера вы увидите логи Менеджера.
    *   Сначала он пишет `Active: 0, Pool Size: 2` (минимум).
    *   Когда вы подключите 3-го клиента, `Active` станет 3. Так как `Active > Pool Size`, менеджер напишет:
        `[Manager] Load high! Spawning new worker.`
    *   Количество процессов увеличится.
4.  Закройте всех клиентов. Через 10 секунд (настройка `IDLE_TIMEOUT`) сервер напишет:
    `[Manager] Load low. Terminating extra worker.`
    И вернет количество процессов к минимуму.